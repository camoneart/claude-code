# /tdd - テスト駆動開発（TDD）コマンド

タスクをTDDアプローチで分割・実装するためのコマンドです。

## 使用方法

```
/tdd <機能の説明>
```

## 実行フロー

1. **要件分析とタスク分割**
   - ユーザーの要求を分析
   - TDD可能な小さな単位にタスクを分割
   - TodoWriteツールで全タスクをリスト化

2. **各タスクのTDDサイクル**
   - やるべきことを箇条書きでまとめ、ToDo形式で書き出しておく（テストリスト）
   - RED: ToDoリストから「1つ」ピックアップし、テストから書き（テストファースト⁠）⁠、そのテストを実行して失敗させる
   - GREEN: テストを通る最小限の実装（テストを通す最小限のコード、綺麗より動作優先のコード）
   - REFACTOR: コードの改善（テストは通ったまま）
   - リファクタリング（REFACTOR）が終わったら、気付きをToDoリスト（テストリスト）に反映し、次のToDoを選んでまたREDに戻る

3. **実装順序**
   - 依存関係の少ないものから実装
   - インターフェース/型定義から始める
   - 単純な機能から複雑な機能へ

## 出力形式

### 1. タスク分割フェーズ
```
## TDDタスク分割

### 実装する機能
<機能の概要>

### タスク一覧
1. [単体機能A] のテストと実装
2. [単体機能B] のテストと実装
3. [統合機能C] のテストと実装
...
```

### 2. 各タスク実装時
```
### タスク: [タスク名]

#### 🔴 RED: テストを書く
<失敗するテストコード>

#### 🟢 GREEN: 実装する
<テストを通す最小実装>

#### 🔵 REFACTOR: リファクタリング
<改善されたコード>
```

## 動作例

### 入力
```
/tdd ユーザー認証機能を実装して
```

### 出力
1. タスクを以下に分割：
   - ユーザーモデルの作成
   - パスワードハッシュ化機能
   - 認証関数の実装
   - JWTトークン生成
   - 認証ミドルウェア

2. 各タスクをTDDサイクルで実装

## 注意事項

- テストフレームワークは既存のプロジェクト設定に従う
- テストファイルの配置場所もプロジェクトの慣習に従う
- モックやスタブは必要最小限に
- テストは独立して実行可能にする
- E2Eテストよりユニットテストを優先

## テストフレームワーク自動検出

プロジェクトで使用されているテストフレームワークを自動検出：
- JavaScript/TypeScript: Jest, Vitest, Mocha, etc.
- Python: pytest, unittest, nose2
- Go: testing, testify
- Rust: cargo test
- その他: プロジェクトの設定ファイルから判定